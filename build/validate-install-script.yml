jobs:
- job: WindowsInstallDefault
  pool:
    vmImage: windows-latest
  steps:
  - template: validate-install-script-powershell.yml@self
    parameters:
      repo: self
      scriptInputs: '-Version 2.0.0-beta'
      expectedCredentialProviderVersion: 'Microsoft.win-x64.NuGet.CredentialProvider'
- job: WindowsInstallNet6
  pool:
    vmImage: windows-latest
  steps:
  - template: validate-install-script-powershell.yml@self
    parameters:
      repo: self
      scriptInputs: '-Version 2.0.0-beta -InstallNet6 -InstallNet8:$False'
      expectedCredentialProviderVersion: 'Microsoft.Net6.NuGet.CredentialProvider'
- job: WindowsInstallNet8NonSC
  pool:
    vmImage: windows-latest
  steps:
  - template: validate-install-script-powershell.yml@self
    parameters:
      repo: self
      scriptInputs: '-Version 2.0.0-beta -InstallNet8 -NonSelfContained'
      expectedCredentialProviderVersion: 'Microsoft.Net8.NuGet.CredentialProvider'
- job: WindowsInstallNet8
  pool:
    vmImage: windows-latest
  steps:
  - template: validate-install-script-powershell.yml@self
    parameters:
      repo: self
      scriptInputs: '-Version 2.0.0-beta -InstallNet8'
      expectedCredentialProviderVersion: 'Microsoft.win-x64.NuGet.CredentialProvider'
- job: WindowsInstallNet8winx64
  pool:
    vmImage: windows-latest
  steps:
  - template: validate-install-script-powershell.yml@self
    parameters:
      repo: self
      scriptInputs: '-Version 2.0.0-beta -InstallNet8 -RuntimeIdentifier win-x64'
      expectedCredentialProviderVersion: 'Microsoft.win-x64.NuGet.CredentialProvider'
- job: WindowsInstallNet8winx64NoParams
  pool:
    vmImage: windows-latest
  steps:
  - template: validate-install-script-powershell.yml@self
    parameters:
      repo: self
      scriptInputs: '-Version 2.0.0-beta -RuntimeIdentifier win-x64'
      expectedCredentialProviderVersion: 'Microsoft.win-x64.NuGet.CredentialProvider'
- job: WindowsInstallNet8winx64Net6Params
  pool:
    vmImage: windows-latest
  steps:
  - template: validate-install-script-powershell.yml@self
    parameters:
      repo: self
      scriptInputs: '-Version 2.0.0-beta -InstallNet6 -RuntimeIdentifier win-x64'
      expectedCredentialProviderVersion: 'Microsoft.win-x64.NuGet.CredentialProvider'
- job: WindowsInstallNetfxDefault
  pool:
    vmImage: windows-latest
  steps:
  - template: validate-install-script-powershell.yml@self
    parameters:
      repo: self
      scriptInputs: '-Version 2.0.0-beta -AddNetfx'
      expectedCredentialProviderVersion: 'Microsoft.NetFx48.NuGet.CredentialProvider'
- job: WindowsInstallNetfx48
  pool:
    vmImage: windows-latest
  steps:
  - template: validate-install-script-powershell.yml@self
    parameters:
      repo: self
      scriptInputs: '-Version 2.0.0-beta -AddNetfx48'
      expectedCredentialProviderVersion: 'Microsoft.NetFx48.NuGet.CredentialProvider'
- job: LinuxInstallDefault
  pool:
    vmImage: ubuntu-latest
  steps:
  - template: validate-install-script-bash.yml@self
    parameters:
      repo: self
      scriptEnvVariables: '-Version 2.0.0-beta'
      expectedCredentialProviderVersion: 'Microsoft.linux-x64.NuGet.CredentialProvider'
- job: LinuxInstallNet8
  pool:
    vmImage: ubuntu-latest
  steps:
  - template: validate-install-script-bash.yml@self
    parameters:
      repo: self
      scriptEnvVariables: |
        export USE_NET6_ARTIFACTS_CREDENTIAL_PROVIDER=false
        export USE_NET8_ARTIFACTS_CREDENTIAL_PROVIDER=true
        export AZURE_ARTIFACTS_CREDENTIAL_PROVIDER_VERSION=2.0.0-beta
      expectedCredentialProviderVersion: 'Microsoft.linux-x64.NuGet.CredentialProvider'
- job: LinuxInstallNet8NonSC
  pool:
    vmImage: ubuntu-latest
  steps:
  - template: validate-install-script-bash.yml@self
    parameters:
      repo: self
      scriptEnvVariables: |
        export ARTIFACTS_CREDENTIAL_PROVIDER_NON_SC=true
        export AZURE_ARTIFACTS_CREDENTIAL_PROVIDER_VERSION=2.0.0-beta
      expectedCredentialProviderVersion: 'Microsoft.Net8.NuGet.CredentialProvider'
- job: LinuxInstallNet6
  pool:
    vmImage: ubuntu-latest
  steps:
  - template: validate-install-script-bash.yml@self
    parameters:
      repo: self
      scriptEnvVariables: |
        export USE_NET6_ARTIFACTS_CREDENTIAL_PROVIDER=true
        export USE_NET8_ARTIFACTS_CREDENTIAL_PROVIDER=false
        export AZURE_ARTIFACTS_CREDENTIAL_PROVIDER_VERSION=2.0.0-beta
      expectedCredentialProviderVersion: 'Microsoft.Net6.NuGet.CredentialProvider'
- job: LinuxInstallNet8Net6Param
  pool:
    vmImage: ubuntu-latest
  steps:
  - template: validate-install-script-bash.yml@self
    parameters:
      repo: self
      scriptEnvVariables: |
        export USE_NET6_ARTIFACTS_CREDENTIAL_PROVIDER=true
        export USE_NET8_ARTIFACTS_CREDENTIAL_PROVIDER=true
        export AZURE_ARTIFACTS_CREDENTIAL_PROVIDER_VERSION=2.0.0-beta
      expectedCredentialProviderVersion: 'Microsoft.linux-x64.NuGet.CredentialProvider'
- job: LinuxInstallNetFx
  pool:
    vmImage: ubuntu-latest
  steps:
  - template: validate-install-script-bash.yml@self
    parameters:
      repo: self
      scriptEnvVariables: |
        export USE_NET6_ARTIFACTS_CREDENTIAL_PROVIDER=false
        export USE_NET8_ARTIFACTS_CREDENTIAL_PROVIDER=false
        export AZURE_ARTIFACTS_CREDENTIAL_PROVIDER_VERSION=2.0.0-beta
      expectedCredentialProviderVersion: 'Microsoft.NetFx48.NuGet.CredentialProvider'
- job: LinuxInstallNet8linuxx64
  pool:
    vmImage: ubuntu-latest
  steps:
  - template: validate-install-script-bash.yml@self
    parameters:
      repo: self
      scriptEnvVariables: |
        export USE_NET6_ARTIFACTS_CREDENTIAL_PROVIDER=false
        export USE_NET8_ARTIFACTS_CREDENTIAL_PROVIDER=true
        export ARTIFACTS_CREDENTIAL_PROVIDER_RID=linux-x64
        export AZURE_ARTIFACTS_CREDENTIAL_PROVIDER_VERSION=2.0.0-beta
      expectedCredentialProviderVersion: 'Microsoft.linux-x64.NuGet.CredentialProvider'
- job: LinuxInstallNet8Auto
  pool:
    vmImage: ubuntu-latest
  steps:
  - template: validate-install-script-bash.yml@self
    parameters:
      repo: self
      scriptEnvVariables: |
        export AZURE_ARTIFACTS_CREDENTIAL_PROVIDER_VERSION=2.0.0-beta
      expectedCredentialProviderVersion: 'Microsoft.linux-x64.NuGet.CredentialProvider'
- job: LinuxInstallNet8linuxarm64
  pool:
    vmImage: ubuntu-latest
  steps:
  - template: validate-install-script-bash.yml@self
    parameters:
      repo: self
      scriptEnvVariables: |
        export USE_NET6_ARTIFACTS_CREDENTIAL_PROVIDER=false
        export USE_NET8_ARTIFACTS_CREDENTIAL_PROVIDER=true
        export ARTIFACTS_CREDENTIAL_PROVIDER_RID=linux-arm64
        export AZURE_ARTIFACTS_CREDENTIAL_PROVIDER_VERSION=2.0.0-beta
      expectedCredentialProviderVersion: 'Microsoft.linux-arm64.NuGet.CredentialProvider'
- job: macOSInstallNet8osxarm64
  pool:
    vmImage: macOS-latest
  steps:
  - template: validate-install-script-bash.yml@self
    parameters:
      repo: self
      scriptEnvVariables: |
        export USE_NET6_ARTIFACTS_CREDENTIAL_PROVIDER=false
        export USE_NET8_ARTIFACTS_CREDENTIAL_PROVIDER=true
        export ARTIFACTS_CREDENTIAL_PROVIDER_RID=osx-arm64
        export AZURE_ARTIFACTS_CREDENTIAL_PROVIDER_VERSION=2.0.0-beta
      expectedCredentialProviderVersion: 'Microsoft.osx-arm64.NuGet.CredentialProvider'
- job: macOSnstallNet8osxx64
  pool:
    vmImage: macOS-latest
  steps:
  - template: validate-install-script-bash.yml@self
    parameters:
      repo: self
      scriptEnvVariables: |
        export USE_NET6_ARTIFACTS_CREDENTIAL_PROVIDER=false
        export USE_NET8_ARTIFACTS_CREDENTIAL_PROVIDER=true
        export ARTIFACTS_CREDENTIAL_PROVIDER_RID=osx-x64
        export AZURE_ARTIFACTS_CREDENTIAL_PROVIDER_VERSION=2.0.0-beta
      expectedCredentialProviderVersion: 'Microsoft.osx-x64.NuGet.CredentialProvider'
- job: macOSInstallNet8Auto
  pool:
    vmImage: macOS-latest
  steps:
  - template: validate-install-script-bash.yml@self
    parameters:
      repo: self
      scriptEnvVariables: |
        export AZURE_ARTIFACTS_CREDENTIAL_PROVIDER_VERSION=2.0.0-beta
      expectedCredentialProviderVersion: 'Microsoft.osx-x64.NuGet.CredentialProvider'
- job: macOSInstallNet8osxx64NoParams
  pool:
    vmImage: macOS-latest
  steps:
  - template: validate-install-script-bash.yml@self
    parameters:
      repo: self
      scriptEnvVariables: |
        export ARTIFACTS_CREDENTIAL_PROVIDER_RID=osx-x64
        export AZURE_ARTIFACTS_CREDENTIAL_PROVIDER_VERSION=2.0.0-beta
      expectedCredentialProviderVersion: 'Microsoft.osx-x64.NuGet.CredentialProvider'
- job: macOSnstallNet8osxx64Net6Params
  pool:
    vmImage: macOS-latest
  steps:
  - template: validate-install-script-bash.yml@self
    parameters:
      repo: self
      scriptEnvVariables: |
        export USE_NET6_ARTIFACTS_CREDENTIAL_PROVIDER=true
        export ARTIFACTS_CREDENTIAL_PROVIDER_RID=osx-x64
        export AZURE_ARTIFACTS_CREDENTIAL_PROVIDER_VERSION=2.0.0-beta
      expectedCredentialProviderVersion: 'Microsoft.osx-x64.NuGet.CredentialProvider'
  